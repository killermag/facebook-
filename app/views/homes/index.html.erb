<%= javascript_pack_tag 'post' %> 
<div class="flex Feed">

  <!-- left -->
  <div class=" w-1/4 flex flex-col items-center" >

    

    <%= link_to current_user_path, class: 'w-11/12 rounded flex items-center pl-4py-2 mt-2 hover:bg-gray-200 cursor-pointer' do %>
      <img x="0" y="0" class="rounded-full h-8 w-8 m-1" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src=<%= User.default_profile_pic %> >
      <div class="pl-2 text-sm"> <%= current_user.formatted_name%> </div>
    <% end %>

    <div class=" w-11/12 rounded flex items-center pl-1 py-2 hover:bg-gray-200">
      <img x="0" y="0" class="rounded-full h-8 w-8" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src="https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/7_gcmlwrelX.png" >
      <div class="pl-2 text-sm "> COVID-19 Information Centre </div>
    </div>
    
    <div class=" w-11/12 rounded flex items-center pl-1 py-2 hover:bg-gray-200">
      <img x="0" y="0" class="rounded-full h-8 w-8" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src="https://static.xx.fbcdn.net/rsrc.php/v3/yj/r/tSXYIzZlfrS.png" >
      <div class="pl-2 text-sm "> Friends </div>
    </div>

    <div class=" w-11/12 rounded flex items-center pl-1 py-2 hover:bg-gray-200">
      <img x="0" y="0" class="rounded-full h-8 w-8" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src="https://static.xx.fbcdn.net/rsrc.php/v3/yj/r/Im_0d7HFH4n.png" >
      <div class="pl-2 text-sm "> Groups </div>
    </div>

    <div class=" w-11/12 rounded flex items-center pl-1 py-2 hover:bg-gray-200">
      <img x="0" y="0" class="rounded-full h-8 w-8" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src="https://static.xx.fbcdn.net/rsrc.php/v3/y4/r/MN44Sm-CTHN.png" >
      <div class="pl-2 text-sm "> Marketplace </div>
    </div>

    <div class=" w-11/12 rounded flex items-center pl-1 py-2 hover:bg-gray-200 cursor-pointer ">
      <img x="0" y="0" class="rounded-full h-8 w-8" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src="https://static.xx.fbcdn.net/rsrc.php/v3/y-/r/FhOLTyUFKwf.png" >
      <div class="pl-2 text-sm "> Watch </div>
    </div>
    
    <div class=" w-11/12 rounded flex items-center pl-1 py-2 hover:bg-gray-200">
      <img x="0" y="0" class="rounded-full h-8 w-8" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src="https://static.xx.fbcdn.net/rsrc.php/v3/yx/r/N7UOh8REweU.png" >
      <div class="pl-2 text-sm "> Events </div>
    </div>

    <div class=" w-11/12 rounded flex items-center pl-1 py-2 hover:bg-gray-200">
      <img x="0" y="0" class="rounded-full h-8 w-8" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src="https://static.xx.fbcdn.net/rsrc.php/v3/y-/r/Uy-TOlM5VXG.png" >
      <div class="pl-2 text-sm "> Memories </div>
    </div>

    <div class=" w-11/12 rounded flex items-center pl-1 py-2 hover:bg-gray-200">
      <img x="0" y="0" class="rounded-full h-8 w-8" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src="https://static.xx.fbcdn.net/rsrc.php/v3/yA/r/KlDlsO3UxDM.png" >
      <div class="pl-2 text-sm "> Saved </div>
    </div>
    
  </div>

  <!-- middle -->
  <div class="w-1/2 flex flex-col items-center hover:op">

    <!-- Form to make a new post -->
    <%= form_with model: Post.new, class: 'flex flex-col items-center bg-white border border-solid border-gray-200 shadow rounded p-2 m-2 w-2/3' do |f| %>
      <div class="flex w-full justify-between items-center">
        <img x="0" y="0" class="rounded-full h-7 w-7 m-1" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src=<%= User.default_profile_pic %> >

          <%= link_to new_post_path, class: 'new-post w-full flex' do %>
            <%= f.text_field nil, class: 'w-full mr-2 my-2 mx-2 rounded-2xl bg-gray-200 px-2 outline-none h-9', placeholder: 'Feelin\' lucky?' %>
          <% end %>

      </div>
    <% end %>

    <!-- Show all posts -->

    <div class="flex w-2/3 mt-6 flex-col ">
      <% @posts.each do |post| %>
        <div class="w-full flex flex-col justify-center bg-white rounded shadow my-2 border border-solid border-gray-200">
          
          <div class="user-name flex ml-4 mt-1 pt-2"> 
            <%= link_to current_user_path do %>
              <img x="0" y="0" class="rounded-full h-7 w-7" height="100%" preserveAspectRatio="xMidYMid slice" width="100%" src=<%= User.default_profile_pic %> > 
            <% end %>
            <div class="ml-2  flex justify-between leading-5 w-full"> 
              <div class="flex flex-col">
                <span class="font-semibold hover:underline">
                  <%= link_to current_user_path do %> 
                    <%= post.user.formatted_name %> 
                  <% end %>
                </span>
                
                <div class="text-xs text-gray-500"><%= post.when %></div>  
              </div>

              
              <% if post.user == current_user %>
                <!-- Posts dropdown -->
                <div class="open-dropdown post-dropdown-toggle mr-2 rounded-full hover:bg-gray-200 h-10 w-10 flex justify-center items-center cursor-pointer select-none">
                  <div class="hidden post-dropdown flex flex-col w-1/6 h-24 bg-white rounded border border-solid border-gray-200 shadow absolute right-1/3 mr-10 mt-8">
      
                    <%= link_to edit_post_path(post), class: 'flex items-center mx-2 mt-2 rounded h-10 pl-2 hover:bg-gray-200 cursor-pointer' do %>
                      <svg class="inline w-6 h-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                        </svg>
                        <p class="pl-4 font-medium">Edit post</p>
                    <% end %>

                    <%= link_to post, method: :delete, class: 'flex items-center mx-2 rounded h-10 pl-2 hover:bg-gray-200 cursor-pointer' do %>
                      <svg class="inline w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                      </svg>
                      <p class="pl-4 font-medium">Delete post</p>
                    <% end %>
                  

                  </div>

                  <svg class="inline self-center w-6 h-6 text-secondarygray fill-current" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
                  </svg>

                </div>   

              <% end %>
            </div>   

            
          </div>

          <div class="user-post-body ml-4 mt-2 mb-2 mr-2 ">
            
            <div class="break-words"><%= post.body %></div>

          </div>

          <div class="file-div">
            <% if post.image_attachment %>
              <div class="pb-20"><%= image_tag post.image, width: '100%' %></div>
            <% end %>
          </div>

          <div class="flex mx-4 mb-2 justify-evenly ">

            <%= link_to likes_path(post: post.id), class: "flex items-center rounded hover:bg-gray-100 w-full justify-center cursor-pointer" do %>
              <svg class="inline w-6 h-6 mr-1 mb-1 self-center text-gray-400 stroke-2 stroke-current text-secondarygray" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"></path>
              </svg>
              <div class="font-medium text-gray-700 text-lg  ml-2">Like</div>
            <% end %>
          
            
            <div class="flex items-center w-full justify-center rounded hover:bg-gray-100 cursor-pointer">
              <svg class="inline w-6 h-6 mr-1 mb-1 text-gray-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"></path>
              </svg>
              <div class="font-medium text-gray-700 text-lg  ml-2">Comment</div>
            </div>
          </div>

        </div>
      <% end %>
      
    </div>
    
  </div>

  <!-- right -->
  <div class="feed-right bg-yellow-200 w-1/4 flex flex-col items-center" >Lorem, ipsum.</div>

</div>
